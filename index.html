<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XR Store</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff0a0a 0%, #cc0000 50%, #ff0a0a 100%);
            color: #fff;
            min-height: 100vh;
        }
        nav {
            background: rgba(255, 10, 10, 0.95);
            padding: 1.2rem 5%;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            border-bottom: 2px solid #fff;
        }
        nav .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo { 
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        .logo-icon {
            width: 50px;
            height: 50px;
            background: #ffffff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 900;
            color: #ff0a0a;
            box-shadow: 
                0 0 20px rgba(255, 10, 10, 0.6),
                0 4px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            transform: rotate(-5deg);
        }
        .logo-icon::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,10,10,0.2), transparent);
            animation: shine 3s infinite;
        }
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
        }
        nav ul {
            display: flex;
            gap: 2.5rem;
            list-style: none;
            align-items: center;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #ffcccc;
        }
        .btn-login, .btn-register {
            background: #fff;
            color: #ff0a0a;
            border: none;
            padding: 0.7rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
        }
        .btn-login:hover, .btn-register:hover {
            background: #ffcccc;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 255, 255, 0.4);
        }
        .btn-register {
            background: transparent;
            border: 2px solid #fff;
            color: #fff;
        }
        .btn-register:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .btn-logout {
            background: #f44336;
            color: #fff;
            border: none;
            padding: 0.7rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: none;
        }
        .btn-logout:hover {
            background: #da190b;
        }
        .btn-admin {
            background: #fff;
            color: #ff0a0a;
            border: 2px solid #fff;
            padding: 0.7rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            display: none;
            transition: all 0.3s;
        }
        .btn-admin:hover {
            background: #ffcccc;
        }
        .hero {
            padding: 140px 5% 60px;
            text-align: center;
            background: linear-gradient(135deg, #ff1a1a 0%, #ff4444 100%);
        }
        .hero h1 { 
            font-size: 2.5rem; 
            margin-bottom: 1rem; 
            color: #fff;
            font-weight: 700;
        }
        .hero p { 
            font-size: 1.1rem; 
            color: #fff;
        }
        .categories {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 5%;
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        .category-btn {
            background: rgba(255, 255, 255, 0.9);
            color: #ff0a0a;
            border: 2px solid #fff;
            padding: 0.8rem 2rem;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .category-btn:hover {
            background: #fff;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        .category-btn.active {
            background: #fff;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            transform: scale(1.05);
        }
        .filter-section {
            max-width: 1400px;
            margin: 1rem auto 0;
            padding: 0 5%;
            display: none;
        }
        .filter-section.active {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        .filter-btn {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.5);
            padding: 0.6rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .filter-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: #fff;
        }
        .filter-btn.active {
            background: #fff;
            color: #ff0a0a;
            border-color: #fff;
        }
        .products {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 5%;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 2rem;
            background: linear-gradient(180deg, #ff1a1a 0%, #cc0000 100%);
        }
        .product-card {
            background: #242424;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            transition: all 0.3s;
            border: 2px solid #333;
        }
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 30px rgba(255, 10, 10, 0.4);
            border-color: #ff0a0a;
        }
        .product-image {
            width: 100%;
            height: 220px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border-bottom: 3px solid #ff0a0a;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        .product-image.has-custom-image {
            background: none;
        }
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .product-image::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255, 10, 10, 0.03) 10px,
                rgba(255, 10, 10, 0.03) 20px
            );
        }
        .product-logo {
            width: 70px;
            height: 70px;
            background: #ffffff;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            font-weight: 900;
            color: #ff0a0a;
            box-shadow: 0 8px 25px rgba(255, 10, 10, 0.5);
            position: relative;
            z-index: 1;
            transform: rotate(-5deg);
        }
        .product-content {
            padding: 1.5rem;
        }
        .product-title { 
            font-size: 1.3rem; 
            margin-bottom: 0.5rem; 
            color: #fff;
            font-weight: 600;
        }
        .product-description { 
            color: #aaa; 
            font-size: 0.9rem; 
            margin-bottom: 1.2rem;
            line-height: 1.5;
        }
        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid #333;
        }
        .price { 
            font-size: 1.6rem; 
            font-weight: 700; 
            color: #fff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        .btn-buy {
            background: #ff0a0a;
            color: #fff;
            border: none;
            padding: 0.7rem 1.8rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(255, 10, 10, 0.3);
        }
        .btn-buy:hover {
            background: #ff3333;
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(255, 10, 10, 0.4);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            overflow-y: auto;
        }
        .modal-content {
            background: #242424;
            margin: 5% auto;
            padding: 2.5rem;
            border-radius: 15px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.8);
            border: 2px solid #ff0a0a;
        }
        .close-modal {
            color: #999;
            float: right;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }
        .close-modal:hover {
            color: #ff0a0a;
        }
        .modal h2 { 
            text-align: center; 
            margin-bottom: 2rem; 
            color: #fff;
            font-weight: 700;
        }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { 
            display: block; 
            margin-bottom: 0.5rem; 
            font-weight: 600;
            color: #fff;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.9rem;
            border: 2px solid #333;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
            background: #1a1a1a;
            color: #fff;
            font-family: inherit;
        }
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        .form-group small {
            color: #999;
            font-size: 0.85rem;
            display: block;
            margin-top: 0.3rem;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #ff0a0a;
        }
        .btn-submit {
            width: 100%;
            padding: 1rem;
            background: #ff0a0a;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 10, 10, 0.3);
        }
        .btn-submit:hover {
            background: #ff3333;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 10, 10, 0.4);
        }
        .form-link {
            text-align: center;
            margin-top: 1rem;
            color: #ccc;
        }
        .form-link a {
            color: #ff0a0a;
            text-decoration: none;
            font-weight: 600;
        }
        .form-link a:hover {
            text-decoration: underline;
        }
        .admin-panel {
            max-width: 900px;
        }
        .admin-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #333;
            flex-wrap: wrap;
        }
        .admin-tab {
            background: transparent;
            color: #ccc;
            border: none;
            padding: 1rem 2rem;
            cursor: pointer;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        .admin-tab.active {
            border-bottom-color: #ff0a0a;
            color: #ff0a0a;
        }
        .admin-section {
            display: none;
        }
        .admin-section.active {
            display: block;
        }
        .user-list, .product-list {
            background: #1a1a1a;
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1rem;
        }
        .user-item, .product-item {
            background: #2d2d2d;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        .product-item {
            flex-direction: column;
            align-items: flex-start;
        }
        .product-item-header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 0.5rem;
        }
        .product-item-info h4 {
            color: #fff;
            margin-bottom: 0.3rem;
        }
        .product-item-info p {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }
        .product-item-meta {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }
        .product-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .badge-category {
            background: #ff0a0a;
            color: #fff;
        }
        .badge-type {
            background: #4CAF50;
            color: #fff;
        }
        .user-role {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 1rem;
            font-weight: 600;
        }
        .role-admin {
            background: #ff0a0a;
            color: #fff;
        }
        .role-user {
            background: #e0e0e0;
            color: #666;
        }
        .btn-action {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin-left: 0.5rem;
            transition: all 0.3s;
        }
        .btn-promote {
            background: #4CAF50;
            color: #fff;
        }
        .btn-promote:hover {
            background: #45a049;
        }
        .btn-demote {
            background: #ff9800;
            color: #fff;
        }
        .btn-demote:hover {
            background: #e68900;
        }
        .btn-edit {
            background: #2196F3;
            color: #fff;
        }
        .btn-edit:hover {
            background: #0b7dda;
        }
        .btn-delete {
            background: #f44336;
            color: #fff;
        }
        .btn-delete:hover {
            background: #da190b;
        }
        footer {
            background: #ff0a0a;
            padding: 2rem 5%;
            text-align: center;
            margin-top: 4rem;
            border-top: 2px solid #fff;
            color: #fff;
        }
        footer a {
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }
        footer a:hover {
            color: #ffcccc;
        }
        .success-message {
            background: #4CAF50;
            color: #fff;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
            display: none;
        }
        .error-message {
            background: #f44336;
            color: #fff;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <div class="logo">
                <div class="logo-icon">XR</div>
                <span class="logo-text">XR Store</span>
            </div>
            <ul>
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#productos">Productos</a></li>
                <li><a href="#contacto">Contacto</a></li>
                <li><button class="btn-register" id="registerBtn">Registrarse</button></li>
                <li><button class="btn-login" id="loginBtn">Iniciar Sesi√≥n</button></li>
                <li><button class="btn-admin" id="adminBtn">Panel Admin</button></li>
                <li><button class="btn-logout" id="logoutBtn">Cerrar Sesi√≥n</button></li>
            </ul>
        </div>
    </nav>

    <section class="hero" id="inicio">
        <h1>Mapeos Premium para tu Servidor</h1>
        <p>Los mejores mapeos personalizados para MTA, FiveM y SAMP</p>
    </section>

    <section class="categories">
        <button class="category-btn active" data-category="all">Todos</button>
        <button class="category-btn" data-category="mta">MTA</button>
        <button class="category-btn" data-category="fivem">FiveM</button>
        <button class="category-btn" data-category="samp">SAMP</button>
        <button class="category-btn" data-category="anticheat">AntiCheat</button>
    </section>

    <section id="mtaFilters" class="filter-section">
        <button class="filter-btn active" data-filter="all">Todos</button>
        <button class="filter-btn" data-filter="scripts">Scripts</button>
        <button class="filter-btn" data-filter="mapeos">Mapeos</button>
    </section>

    <section id="fivemFilters" class="filter-section">
        <button class="filter-btn active" data-filter="all">Todos</button>
        <button class="filter-btn" data-filter="scripts">Scripts</button>
        <button class="filter-btn" data-filter="mapeos">Mapeos</button>
    </section>

    <section id="sampFilters" class="filter-section">
        <button class="filter-btn active" data-filter="all">Todos</button>
        <button class="filter-btn" data-filter="scripts">Scripts</button>
        <button class="filter-btn" data-filter="mapeos">Mapeos</button>
    </section>

    <section class="products" id="productos"></section>

    <footer id="contacto">
        <p>¬© 2024 XR Store. Todos los derechos reservados.</p>
        <div style="margin-top: 1.5rem; display: flex; gap: 2rem; justify-content: center; align-items: center; flex-wrap: wrap;">
            <a href="https://discord.gg/hgNWhj9ZB5" target="_blank" style="display: inline-flex; align-items: center; gap: 0.8rem; text-decoration: none;">
                <div style="width: 45px; height: 45px; background: #fff; border-radius: 8px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.3); transform: rotate(-5deg);">
                    <span style="font-weight: 900; font-size: 1.3rem; color: #5865F2;">DC</span>
                </div>
                <span style="color: #fff; font-weight: bold; font-size: 1.1rem;">Discord</span>
            </a>
            
            <span style="color: rgba(255,255,255,0.5); font-size: 1.5rem;">|</span>
            
            <a href="mailto:xrstore881@gmail.com" style="display: inline-flex; align-items: center; gap: 0.8rem; text-decoration: none;">
                <div style="width: 45px; height: 45px; background: #fff; border-radius: 8px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.3); transform: rotate(-5deg);">
                    <span style="font-weight: 900; font-size: 1.3rem; color: #EA4335;">@</span>
                </div>
                <span style="color: #fff; font-weight: bold; font-size: 1.1rem;">xrstore881@gmail.com</span>
            </a>
        </div>
    </footer>
    <!-- Modal Registro -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeRegister">&times;</span>
            <h2>Crear Cuenta</h2>
            <div class="success-message" id="registerSuccess"></div>
            <div class="error-message" id="registerError"></div>
            <form id="registerForm">
                <div class="form-group">
                    <label>Usuario</label>
                    <input type="text" id="regUsername" required minlength="3">
                    <small>M√≠nimo 3 caracteres</small>
                </div>
                <div class="form-group">
                    <label>Contrase√±a</label>
                    <input type="password" id="regPassword" required minlength="6">
                    <small>M√≠nimo 6 caracteres</small>
                </div>
                <div class="form-group">
                    <label>Confirmar Contrase√±a</label>
                    <input type="password" id="regConfirmPassword" required>
                </div>
                <button type="submit" class="btn-submit">Registrarse</button>
            </form>
            <div class="form-link">
                ¬øYa tienes cuenta? <a href="#" id="goToLogin">Inicia sesi√≥n</a>
            </div>
        </div>
    </div>

    <!-- Modal Login -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeLogin">&times;</span>
            <h2>Iniciar Sesi√≥n</h2>
            <div class="error-message" id="loginError"></div>
            <form id="loginForm">
                <div class="form-group">
                    <label>Usuario</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label>Contrase√±a</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn-submit">Entrar</button>
            </form>
            <div class="form-link">
                ¬øNo tienes cuenta? <a href="#" id="goToRegister">Reg√≠strate</a>
            </div>
        </div>
    </div>

    <!-- Modal Admin Panel -->
    <div id="adminModal" class="modal">
        <div class="modal-content admin-panel">
            <span class="close-modal" id="closeAdmin">&times;</span>
            <h2>Panel de Administraci√≥n</h2>
            
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="users">Usuarios</button>
                <button class="admin-tab" data-tab="products">Gestionar Productos</button>
                <button class="admin-tab" data-tab="addProduct">Agregar Producto</button>
            </div>

            <!-- Tab Usuarios -->
            <div id="usersTab" class="admin-section active">
                <h3 style="color: #fff; margin-bottom: 1rem;">Usuarios Registrados</h3>
                <div id="usersList" class="user-list"></div>
            </div>

            <!-- Tab Gestionar Productos -->
            <div id="productsTab" class="admin-section">
                <h3 style="color: #fff; margin-bottom: 1rem;">Productos Disponibles</h3>
                <div id="productsList" class="product-list"></div>
            </div>

            <!-- Tab Agregar Producto -->
            <div id="addProductTab" class="admin-section">
                <h3 style="color: #fff; margin-bottom: 1rem;">Agregar Nuevo Producto</h3>

                <form id="addProductForm">

                    <div class="form-group">
                        <label>T√≠tulo del Producto</label>
                        <input type="text" id="productTitle" required>
                    </div>

                    <div class="form-group">
                        <label>Descripci√≥n</label>
                        <textarea id="productDescription" required></textarea>
                    </div>

                    <div class="form-group">
                        <label>Precio (ejemplo: $10.00 o GRATIS)</label>
                        <input type="text" id="productPrice" required placeholder="$10.00">
                    </div>

                    <div class="form-group">
                        <label>URL de la Imagen</label>
                        <input type="url" id="productImage" placeholder="https://ejemplo.com/imagen.jpg">
                        <small>Deja vac√≠o para usar el logo XR por defecto</small>
                    </div>

                    <div class="form-group">
                        <label>Categor√≠a</label>
                        <select id="productCategory" required>
                            <option value="mta">MTA</option>
                            <option value="fivem">FiveM</option>
                            <option value="samp">SAMP</option>
                            <option value="anticheat">AntiCheat</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Tipo</label>
                        <select id="productType" required>
                            <option value="scripts">Scripts</option>
                            <option value="mapeos">Mapeos</option>
                            <option value="anticheat">AntiCheat</option>
                        </select>
                    </div>

                    <button type="submit" class="btn-submit">Agregar Producto</button>

                </form>
            </div>
        </div>
    </div>

    <!-- Modal Editar Producto -->
    <div id="editProductModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeEditProduct">&times;</span>
            <h2>Editar Producto</h2>
            <form id="editProductForm">
                <input type="hidden" id="editProductIndex">

                <div class="form-group">
                    <label>T√≠tulo del Producto</label>
                    <input type="text" id="editProductTitle" required>
                </div>

                <div class="form-group">
                    <label>Descripci√≥n</label>
                    <textarea id="editProductDescription" required></textarea>
                </div>

                <div class="form-group">
                    <label>Precio</label>
                    <input type="text" id="editProductPrice" required>
                </div>

                <div class="form-group">
                    <label>URL de la Imagen</label>
                    <input type="url" id="editProductImage" placeholder="https://ejemplo.com/imagen.jpg">
                    <small>Deja vac√≠o para usar el logo XR por defecto</small>
                </div>

                <div class="form-group">
                    <label>Categor√≠a</label>
                    <select id="editProductCategory" required>
                        <option value="mta">MTA</option>
                        <option value="fivem">FiveM</option>
                        <option value="samp">SAMP</option>
                        <option value="anticheat">AntiCheat</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Tipo</label>
                    <select id="editProductType" required>
                        <option value="scripts">Scripts</option>
                        <option value="mapeos">Mapeos</option>
                        <option value="anticheat">AntiCheat</option>
                    </select>
                </div>

                <button type="submit" class="btn-submit">Guardar Cambios</button>
            </form>
        </div>
    </div>
<script>
    // Sistema de almacenamiento
    function saveToStorage(key, data) {
        localStorage.setItem(key, JSON.stringify(data));
    }

    function getFromStorage(key) {
        var data = localStorage.getItem(key);
        return data ? JSON.parse(data) : null;
    }

    // Inicializar datos
    function initializeData() {
        // Cargar usuarios o crear admin por defecto
        var users = getFromStorage('xrstore_users');
        if (!users) {
            users = [
                { username: 'admin', password: 'admin123', role: 'admin' }
            ];
            saveToStorage('xrstore_users', users);
        }
        
        // Cargar productos por defecto
        var products = getFromStorage('xrstore_products');
        if (!products) {
            products = [
                { title: 'Sistema de Inventario', description: 'Sistema completo de inventario para MTA', price: '$16.00', category: 'mta', type: 'scripts', image: '' },
                { title: 'Sistema de Trabajos', description: 'M√∫ltiples trabajos para roleplay MTA', price: '$20.00', category: 'mta', type: 'scripts', image: '' },
                { title: 'Apartamentos Modernos', description: 'Sistema completo de apartamentos con interiores editables', price: 'GRATIS', category: 'mta', type: 'mapeos', image: '' },
                { title: 'Tienditas Pack', description: 'Pack de 10 tiendas peque√±as personalizables', price: '$8.00', category: 'mta', type: 'mapeos', image: '' },
                { title: 'HUD Premium', description: 'Interfaz moderna para FiveM', price: '$15.00', category: 'fivem', type: 'scripts', image: '' },
                { title: 'Sistema de Polic√≠a', description: 'Sistema completo de polic√≠a', price: '$25.00', category: 'fivem', type: 'scripts', image: '' },
                { title: 'Casa de Lujo', description: 'Interior de casa moderna', price: '$14.00', category: 'fivem', type: 'mapeos', image: '' },
                { title: 'Sistema de Facciones', description: 'Sistema completo para SAMP', price: '$19.00', category: 'samp', type: 'scripts', image: '' },
                { title: 'AntiCheat Pro MTA', description: 'Anti trampas avanzado', price: '$30.00', category: 'anticheat', type: 'anticheat', image: '' }
            ];
            saveToStorage('xrstore_products', products);
        }
        
        return { users: users, products: products };
    }

    var data = initializeData();
    var users = data.users;
    var products = data.products;
    var currentUser = null;
    var currentCategory = 'all';
    var currentFilter = 'all';

    // Recuperar sesi√≥n
    var savedSession = getFromStorage('xrstore_session');
    if (savedSession) {
        var foundUser = users.find(function(u) { return u.username === savedSession.username; });
        if (foundUser) {
            currentUser = foundUser;
            updateUIForLoggedInUser();
        }
    }

    // UI LOGGED
    function updateUIForLoggedInUser() {
        document.getElementById('loginBtn').style.display = 'none';
        document.getElementById('registerBtn').style.display = 'none';
        document.getElementById('logoutBtn').style.display = 'block';
        document.getElementById('logoutBtn').textContent = currentUser.username;

        if (currentUser.role === 'admin') {
            document.getElementById('adminBtn').style.display = 'block';
        }
    }

    function updateUIForLoggedOutUser() {
        document.getElementById('loginBtn').style.display = 'block';
        document.getElementById('registerBtn').style.display = 'block';
        document.getElementById('logoutBtn').style.display = 'none';
        document.getElementById('adminBtn').style.display = 'none';
    }

    // Renderizar productos
    function renderProducts() {
        var productsContainer = document.getElementById('productos');
        productsContainer.innerHTML = '';
        
        var filteredProducts = products.filter(function(product) {
            var categoryMatch = currentCategory === 'all' || product.category === currentCategory;
            var filterMatch = currentFilter === 'all' || product.type === currentFilter;
            return categoryMatch && filterMatch;
        });
        
        filteredProducts.forEach(function(product) {
            var card = document.createElement('div');
            card.className = 'product-card';

            var imageHtml = '';
            if (product.image && product.image.trim() !== '') {
                imageHtml = `
                    <div class="product-image has-custom-image">
                        <img src="${product.image}" alt="${product.title}">
                    </div>`;
            } else {
                imageHtml = `
                    <div class="product-image">
                        <div class="product-logo">XR</div>
                    </div>`;
            }
            
            card.innerHTML = imageHtml +
                `<div class="product-content">
                    <h3 class="product-title">${product.title}</h3>
                    <p class="product-description">${product.description}</p>
                    <div class="product-footer">
                        <span class="price">${product.price}</span>
                        <button class="btn-buy">${product.price === 'GRATIS' ? 'Descargar' : 'Comprar'}</button>
                    </div>
                </div>`;
            
            productsContainer.appendChild(card);
        });
    }

    // Categor√≠as
    document.querySelectorAll('.category-btn').forEach(function(btn) {
        btn.onclick = function() {
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentCategory = btn.getAttribute('data-category');
            currentFilter = 'all';

            document.querySelectorAll('.filter-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.filter-btn').forEach(f => f.classList.remove('active'));

            if (currentCategory === 'mta') document.getElementById('mtaFilters').classList.add('active');
            if (currentCategory === 'fivem') document.getElementById('fivemFilters').classList.add('active');
            if (currentCategory === 'samp') document.getElementById('sampFilters').classList.add('active');

            renderProducts();
        };
    });

    // Modales
    var registerModal = document.getElementById('registerModal');
    var loginModal = document.getElementById('loginModal');
    var adminModal = document.getElementById('adminModal');
    var editProductModal = document.getElementById('editProductModal');

    document.getElementById('registerBtn').onclick = () => registerModal.style.display = 'block';
    document.getElementById('loginBtn').onclick = () => loginModal.style.display = 'block';
    document.getElementById('adminBtn').onclick = () => {
        adminModal.style.display = 'block';
        loadUsersList();
        loadProductsList();
    };

    document.getElementById('logoutBtn').onclick = function() {
        if (confirm('¬øSeguro que deseas cerrar sesi√≥n?')) {
            currentUser = null;
            localStorage.removeItem('xrstore_session');
            updateUIForLoggedOutUser();
            alert('Sesi√≥n cerrada');
        }
    };

    document.querySelectorAll('.close-modal').forEach(function(close) {
        close.onclick = function() {
            close.parentElement.parentElement.style.display = 'none';
        };
    });

    // ** Registro **
    document.getElementById('registerForm').onsubmit = function(e) {
        e.preventDefault();
        
        let username = regUsername.value.trim();
        let password = regPassword.value;
        let confirmPassword = regConfirmPassword.value;

        if (users.some(u => u.username === username)) {
            registerError.textContent = 'El usuario ya existe';
            registerError.style.display = 'block';
            return;
        }

        if (password !== confirmPassword) {
            registerError.textContent = 'Las contrase√±as no coinciden';
            registerError.style.display = 'block';
            return;
        }

        users.push({ username, password, role: 'user' });
        saveToStorage('xrstore_users', users);

        registerSuccess.textContent = 'Cuenta creada. Redirigiendo...';
        registerSuccess.style.display = 'block';

        setTimeout(() => {
            registerModal.style.display = 'none';
            loginModal.style.display = 'block';
            usernameInput.value = username;
        }, 1500);
    };

    // ** Login **
    document.getElementById('loginForm').onsubmit = function(e) {
        e.preventDefault();
        
        let username = usernameInput.value.trim();
        let password = passwordInput.value;

        let foundUser = users.find(u => u.username === username && u.password === password);

        if (!foundUser) {
            loginError.textContent = 'Usuario o contrase√±a incorrectos';
            loginError.style.display = 'block';
            return;
        }

        currentUser = foundUser;
        saveToStorage('xrstore_session', { username });

        updateUIForLoggedInUser();
        loginModal.style.display = 'none';
    };

    // ** PANEL ADMIN: Cargar Usuarios **
    function loadUsersList() {
        var usersList = document.getElementById('usersList');
        usersList.innerHTML = '';
        
        users.forEach(function(user, index) {
            var userItem = document.createElement('div');
            userItem.className = 'user-item';
            
            var userInfo = document.createElement('div');
            userInfo.innerHTML = `
                <strong style="color: #fff">${user.username}</strong>
                <span class="user-role role-${user.role}">${user.role.toUpperCase()}</span>
            `;

            var actions = document.createElement('div');

            // ‚òÖ‚òÖ‚òÖ FIX ‚Äî PROMOVER A ADMIN
            if (currentUser.role === 'admin') {

                if (user.role === 'user') {
                    var promoteBtn = document.createElement('button');
                    promoteBtn.className = 'btn-action btn-promote';
                    promoteBtn.textContent = 'Hacer Admin';
                    promoteBtn.onclick = function() {

                        users[index].role = 'admin';
                        saveToStorage('xrstore_users', users);

                        if (currentUser.username === user.username) {
                            currentUser.role = 'admin';
                            saveToStorage('xrstore_session', { username: currentUser.username });
                            updateUIForLoggedInUser(); // <--- FIX üî•
                        }

                        loadUsersList();
                    };
                    actions.appendChild(promoteBtn);
                }

                // ‚òÖ‚òÖ‚òÖ FIX ‚Äî QUITAR ADMIN
                if (user.role === 'admin' && user.username !== currentUser.username) {
                    var demoteBtn = document.createElement('button');
                    demoteBtn.className = 'btn-action btn-demote';
                    demoteBtn.textContent = 'Quitar Admin';
                    demoteBtn.onclick = function() {

                        users[index].role = 'user';
                        saveToStorage('xrstore_users', users);

                        if (currentUser.username === user.username) {
                            currentUser.role = 'user';
                            saveToStorage('xrstore_session', { username: currentUser.username });
                            updateUIForLoggedOutUser(); // <--- FIX üî•
                        }

                        loadUsersList();
                    };
                    actions.appendChild(demoteBtn);
                }

                // ELIMINAR
                if (user.username !== currentUser.username) {
                    var deleteBtn = document.createElement('button');
                    deleteBtn.className = 'btn-action btn-delete';
                    deleteBtn.textContent = 'Eliminar';
                    deleteBtn.onclick = function() {
                        if (confirm('Eliminar usuario?')) {
                            users.splice(index, 1);
                            saveToStorage('xrstore_users', users);
                            loadUsersList();
                        }
                    };
                    actions.appendChild(deleteBtn);
                }
            }

            userItem.appendChild(userInfo);
            userItem.appendChild(actions);

            usersList.appendChild(userItem);
        });
    }

    // ** PANEL ADMIN: Cargar Productos **
    function loadProductsList() {
        var list = document.getElementById('productsList');
        list.innerHTML = '';

        products.forEach(function(product, index) {
            var item = document.createElement('div');
            item.className = 'product-item';

            item.innerHTML = `
                <div class="product-item-header">
                    <div class="product-item-info">
                        <h4>${product.title}</h4>
                        <p>${product.description}</p>
                        <p><strong style="color:#ff0a0a">${product.price}</strong></p>
                    </div>

                    <div>
                        <button class="btn-action btn-edit" onclick="openEditProductModal(${index})">Editar</button>
                        <button class="btn-action btn-delete" onclick="deleteProduct(${index})">Eliminar</button>
                    </div>
                </div>

                <div class="product-item-meta">
                    <span class="product-badge badge-category">${product.category.toUpperCase()}</span>
                    <span class="product-badge badge-type">${product.type}</span>
                </div>
            `;

            list.appendChild(item);
        });
    }

    // Editar producto
    function openEditProductModal(index) {
        var product = products[index];
        
        document.getElementById('editProductIndex').value = index;
        editProductTitle.value = product.title;
        editProductDescription.value = product.description;
        editProductPrice.value = product.price;
        editProductImage.value = product.image;
        editProductCategory.value = product.category;
        editProductType.value = product.type;

        editProductModal.style.display = 'block';
    }

    // Guardar edici√≥n
    document.getElementById('editProductForm').onsubmit = function(e) {
        e.preventDefault();

        var index = editProductIndex.value;

        products[index] = {
            title: editProductTitle.value,
            description: editProductDescription.value,
            price: editProductPrice.value,
            image: editProductImage.value,
            category: editProductCategory.value,
            type: editProductType.value
        };

        saveToStorage('xrstore_products', products);
        loadProductsList();
        renderProducts();
        editProductModal.style.display = 'none';
    };

    // Eliminar producto
    function deleteProduct(index) {
        if (confirm('¬øEliminar este producto?')) {
            products.splice(index, 1);
            saveToStorage('xrstore_products', products);
            loadProductsList();
            renderProducts();
        }
    }

    // Agregar producto
    document.getElementById('addProductForm').onsubmit = function(e) {
        e.preventDefault();

        var newProduct = {
            title: productTitle.value,
            description: productDescription.value,
            price: productPrice.value,
            image: productImage.value,
            category: productCategory.value,
            type: productType.value
        };

        products.push(newProduct);
        saveToStorage('xrstore_products', products);

        alert("Producto agregado");
        loadProductsList();
        renderProducts();
    };

    // Render inicial
    renderProducts();
</script>
</body>
</html>
